(this.webpackJsonpsimfoni_ui=this.webpackJsonpsimfoni_ui||[]).push([[0],{16:function(e,t,s){},27:function(e,t,s){},33:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(1),a=s.n(i),r=s(20),c=s.n(r),o=(s(27),s(16),s(7)),l=s(8),j=s(10),h=s(9),d=s(2),u=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={refresh:localStorage.getItem("refresh"),response:null,editing:!1,auth_redirect:!1,product_supplier:null,logout:!1},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.profile()}},{key:"refresh",value:function(){var e=this;fetch("https://simfoni-supplier.herokuapp.com/api/suppliers/token/refresh/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({refresh:JSON.parse(localStorage.getItem("refresh"))})}).then((function(t){200==t.status?(t.json().then((function(e){localStorage.setItem("access",JSON.stringify(e.access))})),e.editing?e.profileEdit():e.profile()):401==t.status?e.setState({auth_redirect:!0}):alert("Something went wrong")})).catch((function(e){console.log("Errors: ",e)}))}},{key:"profile",value:function(){var e=this,t="https://simfoni-supplier.herokuapp.com/api/suppliers/"+localStorage.getItem("id")+"/",s="Bearer "+JSON.parse(localStorage.getItem("access"));fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:s}}).then((function(t){200==t.status?t.json().then((function(t){e.setState({response:t,product_supplier:t.product_supplier})})):401==t.status?e.refresh():alert("Something went wrong")})).catch((function(e){console.log("Errors: ",e)}))}},{key:"profileEdit",value:function(){var e=this,t="https://simfoni-supplier.herokuapp.com/api/suppliers/update/"+localStorage.getItem("id")+"/",s="Bearer "+JSON.parse(localStorage.getItem("access"));fetch(t,{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:s},body:JSON.stringify(this.state)}).then((function(t){200==t.status?(t.json().then((function(t){e.setState({response:t})})),e.setState({editing:!1})):401==t.status?e.refresh():400==t.status?alert("Something wrong with the given values"):alert("Something went wrong")})).catch((function(e){console.log("Errors: ",e)}))}},{key:"render",value:function(){var e=this;return this.state.auth_redirect?Object(n.jsx)(d.a,{to:"/"}):this.state.logout?Object(n.jsx)(d.a,{to:"/logout"}):Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("h2",{children:"Welcome to the Simfoni Dashboard"}),Object(n.jsx)("div",{className:"auth-inner",children:this.state.response?this.state.editing?Object(n.jsxs)("div",{children:[Object(n.jsxs)("h2",{children:[" Hello ",this.state.response.primary_email]}),Object(n.jsx)("h2",{children:"Edit Profile"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Email: "}),this.state.response.primary_email]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Businesss Name:"})," ",Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.business_name,onChange:function(t){e.setState({business_name:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Full Name: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.primary_full_name,onChange:function(t){e.setState({primary_full_name:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Address: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.address,onChange:function(t){e.setState({address:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Phone: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.primary_phone,onChange:function(t){e.setState({primary_phone:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Secondary Name: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.secondary_full_name,onChange:function(t){e.setState({secondary_full_name:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Secondary Email: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.secondary_email,onChange:function(t){e.setState({secondary_email:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Secondary Phone: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.secondary_phone,onChange:function(t){e.setState({secondary_phone:t.target.value})}})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Related Entities: "}),Object(n.jsx)("input",{type:"text",defaultValue:this.state.response.related_entities,onChange:function(t){e.setState({related_entities:t.target.value})}})]}),Object(n.jsx)("button",{onClick:function(){e.profileEdit()},children:" Save"})]}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("h2",{children:[" Hello ",this.state.response.primary_email]}),Object(n.jsx)("h2",{children:"Profile"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Businesss Name: "}),this.state.response.business_name]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Full Name: "}),this.state.response.primary_full_name]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Address: "}),this.state.response.address]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Email: "}),this.state.response.primary_email]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Phone: "}),this.state.response.primary_phone]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Secondary Name: "}),this.state.response.secondary_full_name]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Secondary Email: "}),this.state.response.secondary_email]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Secondary Phone: "}),this.state.response.secondary_phone]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Related Entities: "}),"[",this.state.response.related_entities,"]"]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("b",{children:"Products: "})," ",this.state.product_supplier.map((function(e){return Object(n.jsx)("p",{children:e.name})}))]}),Object(n.jsx)("button",{onClick:function(){return e.setState({editing:!0})},children:" Edit Profile"})]}):Object(n.jsx)("div",{children:" Loading ...."})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{style:{paddingLeft:"50%"},children:["  ",Object(n.jsx)("button",{onClick:function(){e.setState({logout:!0})},children:"Logout"})]})]})}}]),s}(i.Component),p=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={response:null,auth_redirect:!1,logout:!1},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.listing()}},{key:"refresh",value:function(){var e=this;fetch("https://simfoni-supplier.herokuapp.com/api/suppliers/token/refresh/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({refresh:JSON.parse(localStorage.getItem("refresh"))})}).then((function(t){200==t.status?(t.json().then((function(e){localStorage.setItem("access",JSON.stringify(e.access))})),e.listing()):401==t.status?e.setState({auth_redirect:!0}):alert("Something went wrong")})).catch((function(e){console.log("Errors: ",e)}))}},{key:"listing",value:function(){var e=this,t="Bearer "+JSON.parse(localStorage.getItem("access"));fetch("https://simfoni-supplier.herokuapp.com/api/suppliers/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t}}).then((function(t){200==t.status?t.json().then((function(t){e.setState({response:t})})):401==t.status?e.refresh():alert("Something went wrong")})).catch((function(e){console.log("Errors: ",e)}))}},{key:"renderTableHeader",value:function(){return["Id","Business Name","Email","Full Name","Address"].map((function(e,t){return Object(n.jsx)("th",{children:e.toUpperCase()},t)}))}},{key:"renderTableData",value:function(){return this.state.response.results.map((function(e,t){var s=e.id,i=e.business_name,a=e.primary_email,r=e.primary_full_name,c=e.address;return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:s}),Object(n.jsx)("td",{children:i}),Object(n.jsx)("td",{children:a}),Object(n.jsx)("td",{children:r}),Object(n.jsx)("td",{children:c})]},s)}))}},{key:"render",value:function(){var e=this;return this.state.auth_redirect?Object(n.jsx)(d.a,{to:"/"}):this.state.logout?Object(n.jsx)(d.a,{to:"/logout"}):Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("h2",{children:"Welcome to the Admin Pannel"}),Object(n.jsx)("div",{className:"listing",children:this.state.response?Object(n.jsx)("div",{children:Object(n.jsx)("table",{id:"supplier",children:Object(n.jsxs)("tbody",{children:[Object(n.jsx)("tr",{children:this.renderTableHeader()}),this.renderTableData()]})})}):Object(n.jsx)("div",{children:" Loading ...."})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{style:{paddingLeft:"94%"},children:["  ",Object(n.jsx)("button",{onClick:function(){e.setState({logout:!0})},children:"Logout"})]})]})}}]),s}(i.Component),b=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={logged_out:!1},n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.Logout()}},{key:"Logout",value:function(){var e=this;fetch("https://simfoni-supplier.herokuapp.com/api/suppliers/logout/",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({refresh:JSON.parse(localStorage.getItem("refresh"))})}).then((function(t){204==t.status?(e.setState({logged_out:!0}),localStorage.clear()):alert("Something went wrong")}))}},{key:"render",value:function(){return this.state.logged_out?Object(n.jsx)(d.a,{to:"/"}):Object(n.jsx)("div",{className:"header",children:"Loading ...."})}}]),s}(i.Component),O=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={is_admin:!1,redirect:!1,is_register:!1},e}return Object(l.a)(s,[{key:"login",value:function(){var e=this;fetch("https://simfoni-supplier.herokuapp.com/api/suppliers/login/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.state)}).then((function(t){200==t.status?t.json().then((function(t){localStorage.setItem("access",JSON.stringify(t.access)),localStorage.setItem("id",JSON.stringify(t.account_id)),localStorage.setItem("refresh",JSON.stringify(t.refresh)),localStorage.setItem("is_admin",t.is_admin),e.setState({redirect:!0,is_admin:t.is_admin})})):404==t.status?alert("No user Found, Please double check the credentials"):alert("Something went wrong")}))}},{key:"render",value:function(){var e=this;return this.state.redirect&&this.state.is_admin?Object(n.jsx)(d.a,{to:"/admin"}):this.state.redirect?Object(n.jsx)(d.a,{to:"/profile"}):this.state.is_register?Object(n.jsx)(d.a,{to:"/signup"}):Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("h2",{children:"Welcome to Simfoni Supplier Dashboard"}),Object(n.jsxs)("div",{className:"auth-inner",children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"Email",onChange:function(t){e.setState({username:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",onChange:function(t){e.setState({password:t.target.value})}})]}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",onClick:function(){e.login()},children:"Login"}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Create an account? ",Object(n.jsx)("a",{href:"",onClick:function(){e.setState({is_register:!0})},children:" Register"})]})]})]})}}]),s}(i.Component),x=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={redirect:!1,is_login:!1},e}return Object(l.a)(s,[{key:"register",value:function(){var e=this;this.state.password==this.state.c_password?fetch("https://simfoni-supplier.herokuapp.com/api/suppliers/register/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.state)}).then((function(t){201==t.status?(t.json().then((function(e){})),e.setState({redirect:!0})):400==t.status?alert("Validation Failed, Please put email and Password in correct manner"):alert("Something went wrong")})).catch((function(e){console.log("Errors: ",e)})):alert("Confirm Password are not matching with Password")}},{key:"render",value:function(){var e=this;return this.state.redirect||this.state.is_login?Object(n.jsx)(d.a,{to:"/"}):Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("h2",{children:"Welcome to Simfoni Supplier Dashboard"}),Object(n.jsx)("div",{className:"auth-inner",children:Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"text",placeholder:"Business Name",onChange:function(t){e.setState({business_name:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"Address",onChange:function(t){e.setState({address:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"Full Name",onChange:function(t){e.setState({primary_full_name:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"Email",onChange:function(t){e.setState({primary_email:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"Password",onChange:function(t){e.setState({password:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:Object(n.jsxs)("i",{children:["*Should contain one Capital and one lowercase letter, one digit,",Object(n.jsx)("br",{})," one special character and minimum of 8 characters."]})})," ",Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",placeholder:"Confirm Password",onChange:function(t){e.setState({c_password:t.target.value})}})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{onClick:function(){return e.register()},children:"Register"})," ",Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Already have an account? ",Object(n.jsx)("a",{href:"",onClick:function(){e.setState({is_login:!0})},children:" Login"})]})]})})]})}}]),s}(i.Component);var m=function(e){var t=e.cmp,s=e.admin,i=JSON.parse(localStorage.getItem("id")),a=JSON.parse(localStorage.getItem("is_admin"));return i?e.logout?Object(n.jsx)(t,{}):s?!0===a?Object(n.jsx)(t,{}):Object(n.jsxs)("div",{children:[" ",Object(n.jsx)(d.a,{to:"/"})]}):!0===a?Object(n.jsx)("div",{children:Object(n.jsx)(d.a,{to:"/"})}):Object(n.jsx)(t,{}):Object(n.jsxs)("div",{children:[" ",Object(n.jsx)(d.a,{to:"/"})]})},f=s(11);var g=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("div",{className:"auth-wrapper",children:Object(n.jsx)("div",{children:Object(n.jsx)(f.a,{children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{path:"/profile",exact:!0,children:Object(n.jsx)(m,{cmp:u})}),Object(n.jsx)(d.b,{path:"/logout",children:Object(n.jsx)(m,{cmp:b,logout:1})}),Object(n.jsx)(d.b,{path:"/admin",children:Object(n.jsx)(m,{cmp:p,admin:1})}),Object(n.jsx)(d.b,{path:"/signup",children:Object(n.jsx)(x,{})}),Object(n.jsx)(d.b,{path:"/",children:Object(n.jsx)(O,{})})]})})})})})},S=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,34)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),i(e),a(e),r(e)}))};c.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root")),S()}},[[33,1,2]]]);
//# sourceMappingURL=main.fd8fba97.chunk.js.map